<script type="text/javascript">
  function bitShiftRight(a, b) {
    // don't use JS bitshift, this might fail with big numbers
    return Math.round(a / Math.pow(2, b));
  }

  function jQueryMe(obj) {
    return $(obj);
  }
</script>

<script src="/amber/server/projects/amber/js/amber.js" type="text/javascript"></script>
<link href="/assets/object_explorer.css" rel="stylesheet" />

<%= render(:partial => "shared/dropdown_object_menu", :locals => {:id => "object-dropdown-menu"}) %>
<%= render(:partial => "workspace") %>

<script type="text/javascript">
  loadAmber({
    packages: ["AmberProject-Core.js", "../../../../js/Kernel-Objects.js", "../../../../js/Kernel-Collections.js", "../../../../js/Canvas.js", "../../../../js/Maglev-Core.js", "../../../../js/Maglev-Database-Explorer.js", "../../../../js/Maglev-Vendor.js"],
    packageHome: "/amber/server/projects/importer/",
    ready: function() {
      $(function() {
        smalltalk.AmberProjectExporter._registerPackage_type_prefix_(
          'AmberProject-Core',
          'js',
          '/amber/server/projects/importer/'
        );
        smalltalk.Browser._open();
      
        smalltalk.Maglev._persistentRootId_(<%= Maglev::PERSISTENT_ROOT.object_id %>);
        smalltalk.Maglev._maglevSystemId_(<%= Maglev::System.object_id %>);
        smalltalk.Maglev._defaultWorkspaceId_(<%= RubyWorkspace.default_instance.object_id %>);

        smalltalk.Maglev._ready();
      });
    }
  }); 
</script>

